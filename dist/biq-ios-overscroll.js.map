{"version":3,"sources":["webpack:///webpack/bootstrap 86f02627a920f7e2d661","webpack:///./src/main.js","webpack:///./src/module/biq-ios-overscroll.js"],"names":["biqIosOverScroll","biqIosOverscroll","config","limit_top","state","previously_disabled","enable_scroll","is_panning","touch_time_start","touch_time_end","touch_time_delta","scroll_y_current","scroll_x_current","y_start","y_end","y_delta","scroll_smooth","timeout_fn","window","scrollY","addEventListener","e","onTouchstart","onTouchmove","passive","onTouchend","onScroll","$","now","touches","clientY","scrollX","scroll_pos","Math","abs","is_limit","is_pan_up","scrollTo","preventDefault","is_limit_top","is_touchmove_fast","is_touchmove_far","stop","animate","scrollTop","is_scroll_down"],"mappings":"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","file":"biq-ios-overscroll.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 86f02627a920f7e2d661","import {biqIosOverscroll} from \"./module/biq-ios-overscroll\";\n\nlet biqIosOverScroll = new biqIosOverscroll;\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","class biqIosOverscroll{\n\n    constructor(){\n        // this.init();\n        this.config = {\n            limit_top : 30\n        };\n        this.state = {\n            previously_disabled: false, //For touchend detect that it was disabled\n            enable_scroll : false,\n            is_panning: false,\n            touch_time_start: null,\n            touch_time_end: null,\n            touch_time_delta: 0,\n            scroll_y_current: 0,\n            scroll_x_current: 0,\n            y_start: 0,\n            y_end: 0,\n            y_delta: 0,// ( - ) on scroll up, ( + ) on scrolldown\n            scroll_smooth: {\n                timeout_fn: null\n            }\n        };\n\n    }\n\n    init(){\n        if(window.scrollY>this.config.limit_top){\n            this.state.enable_scroll = true;\n        }\n        window.addEventListener('touchstart', (e)=>this.onTouchstart(e));\n        window.addEventListener('touchmove', (e)=>this.onTouchmove(e) ,{passive: false});\n        window.addEventListener('touchend', (e)=>this.onTouchend(e), {passive: false});\n        window.addEventListener('scroll', (e)=>this.onScroll(e));\n\n    }\n\n    onTouchstart(e){\n        this.state.touch_time_start = $.now();\n        this.state.y_start = e.touches[0].clientY;\n        this.state.scroll_y_current = window.scrollY;\n        this.state.scroll_x_current = window.scrollX;\n        this.state.is_panning = true;\n        if(!this.state.enable_scroll){\n            this.state.previously_disabled = true;\n        }\n    }\n\n    onTouchmove(e){\n        this.state.y_end = e.touches[0].clientY;\n        let scroll_pos = window.scrollY;\n        this.state.y_delta = Math.abs(this.state.y_end) - Math.abs(this.state.y_start);\n        // console.log(this.state.y_delta);\n\n        let is_limit = scroll_pos <= this.config.limit_top;\n        // console.log(is_limit);\n        if(!is_limit){\n            // console.log('Enabling scroll');\n            this.state.enable_scroll = true;\n        }else{\n            // console.log('Disabling scroll');\n            this.state.enable_scroll = false;\n        }\n\n        if(!this.state.enable_scroll || this.state.previously_disabled){\n            let scroll_pos = 0;\n            let is_pan_up = this.state.y_delta<0;\n            if(is_pan_up){//if scroll up\n                scroll_pos = this.state.scroll_y_current + Math.abs( this.state.y_delta );\n            }else{//if scroll down\n                scroll_pos = this.state.scroll_y_current - this.state.y_delta;\n            }\n\n            // console.log(is_pan_up);\n            window.scrollTo(this.state.scroll_x_current, scroll_pos);\n\n            e.preventDefault();\n        }\n\n        // console.log(this.state.enable_scroll);\n    }\n\n    onTouchend(e){\n        this.state.touch_time_end = $.now();\n        this.state.touch_time_delta = this.state.touch_time_end - this.state.touch_time_start;\n\n        let scroll_pos = window.scrollY;\n        let is_limit_top = scroll_pos <= this.config.limit_top;\n        let is_pan_up = this.state.y_delta < 0;\n        this.state.is_panning = false;\n        /*            console.log(JSON.stringify( {\n                        is_limit_top: is_limit_top,\n                        is_pan_up: is_pan_up,\n                        previously_disabled: this.state.previously_disabled\n                    } ));*/\n        let is_touchmove_fast = this.state.touch_time_delta < 500;\n        let is_touchmove_far = Math.abs(this.state.y_delta) > 50;\n        if(!is_limit_top && is_pan_up && this.state.previously_disabled && this.state.enable_scroll && is_touchmove_fast && is_touchmove_far){\n            e.preventDefault();\n            // console.log('animate');\n            $('html, body').stop().animate({scrollTop: scroll_pos+125}, 300);\n        }\n        this.state.previously_disabled = false;\n    }\n\n    onScroll(e){\n        if(this.state.is_panning){\n            return;\n        }\n        let scroll_pos = window.scrollY;\n        let is_limit_top = scroll_pos<=this.config.limit_top;\n        let is_scroll_down = this.state.y_delta > 0;\n        if(is_limit_top && is_scroll_down && (scroll_pos!==0)){\n            this.state.enable_scroll = false;\n            window.scrollTo(0, 0);\n            e.preventDefault();\n        }\n        /*        console.log(JSON.stringify({\n                    is_limit_top: is_limit_top,\n                    is_scroll_down: is_scroll_down,\n                    scroll_pos: scroll_pos,\n                    y_delta: this.state.y_delta,\n                    y_start: this.state.y_start,\n                    y_end: this.state.y_end\n                }));*/\n    }\n}\nexport {biqIosOverscroll}\n\n\n// WEBPACK FOOTER //\n// ./src/module/biq-ios-overscroll.js"],"sourceRoot":""}